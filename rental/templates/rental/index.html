{% extends 'rental/base.html' %}

{% block title %}SprzÄ™t - WypoÅ¼yczalnia{% endblock %}

{% block content %}
<h1>ğŸ“¦ DostÄ™pny SprzÄ™t</h1>

{% if user.is_authenticated %}
<a href="{% url 'new_rental' %}" class="btn btn-success">+ Wynajmij SprzÄ™t</a>
{% else %}
<p><button type="button" class="btn" onclick="window.location.href='{% url 'login' %}'">
    Zaloguj siÄ™
  </button> aby wynajÄ…Ä‡ sprzÄ™t.</p>
{% endif %}

<table>
  <thead>
    <tr>
      <th>Nazwa</th>
      <th>Kategoria</th>
      <th>Opis</th>
      <th>Status</th>
      <th>Akcja</th>
    </tr>
  </thead>
  <tbody>
    {% for item in equipment %}
    <tr>
      <td><strong>{{ item.name }}</strong></td>
      <td>{{ item.get_category_display }}</td>
      <td>{{ item.description }}</td>

      <td>
        {% if item.is_available and not item.rented_today %}
        <span class="available">âœ… DostÄ™pny</span>
        {% elif item.is_available and item.rented_today %}
        <span class="unavailable">â›” Aktualnie wynajÄ™ty</span>
        {% else %}
        <span class="unavailable">âŒ NiedostÄ™pny</span>
        {% endif %}
      </td>

      <td>
        {% if user.is_authenticated and item.is_available and not item.rented_today %}
        <a href="{% url 'new_rental' %}?equipment={{ item.id }}" class="btn">Wynajmij</a>
        {% else %}
        <button class="btn btn-disabled" disabled>Wynajmij</button>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" style="text-align: center;">Brak dostÄ™pnego sprzÄ™tu.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}